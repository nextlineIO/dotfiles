# Hypridle — production config (dim → lock → suspend)

general {
    # Always use the hook so dashboards are closed before locking
    lock_cmd = /home/eric/bin/session-lock-hook.sh

    # Lock before suspend; on resume, ensure display wakes cleanly
    before_sleep_cmd = loginctl lock-session
    after_sleep_cmd  = hyprctl dispatch dpms on
}

# 200s — DIM PANEL
# Save current level and dim to 10%. On activity, restore saved level.
listener {
    timeout    = 200
    on-timeout = brightnessctl -s -d intel_backlight set 10
    on-resume  = brightnessctl -r -d intel_backlight
}

# (Optional) 200s — KEYBOARD BACKLIGHT OFF (ThinkPad)
# Uncomment if you want kbd backlight managed as well.
 listener {
     timeout    = 200
     on-timeout = brightnessctl -s -d tpacpi::kbd_backlight set 0
     on-resume  = brightnessctl -r -d tpacpi::kbd_backlight
 }

# 300s — LOCK SCREEN (via hook: kills dashboards, then hyprlock)
listener {
    timeout    = 300
    on-timeout = /home/eric/bin/session-lock-hook.sh
}

# 500s — SUSPEND
listener {
    timeout    = 500
    on-timeout = systemctl suspend
}

